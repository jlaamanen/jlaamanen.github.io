var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function i(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e){return null==e?"":e}function c(e,t){e.appendChild(t)}function a(e,t,n){e.insertBefore(t,n||null)}function u(e){e.parentNode.removeChild(e)}function s(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function f(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function m(){return p(" ")}function h(){return p("")}function g(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function $(e){return function(t){return t.preventDefault(),e.call(this,t)}}function y(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function v(e){return""===e?null:+e}function b(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function K(e,t){e.value=null==t?"":t}function w(e,t){for(let n=0;n<e.options.length;n+=1){const o=e.options[n];if(o.__value===t)return void(o.selected=!0)}}function k(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let D;function x(e){D=e}function _(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const E=[],C=[],N=[],A=[],B=Promise.resolve();let M=!1;function G(e){N.push(e)}function F(e){A.push(e)}let O=!1;const q=new Set;function j(){if(!O){O=!0;do{for(let e=0;e<E.length;e+=1){const t=E[e];x(t),S(t.$$)}for(x(null),E.length=0;C.length;)C.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];q.has(t)||(q.add(t),t())}N.length=0}while(E.length);for(;A.length;)A.pop()();M=!1,O=!1,q.clear()}}function S(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(G)}}const T=new Set;let P;function V(e,t){e&&e.i&&(T.delete(e),e.i(t))}function L(e,t,n,o){if(e&&e.o){if(T.has(e))return;T.add(e),P.c.push((()=>{T.delete(e),o&&(n&&e.d(1),o())})),e.o(t)}}function I(e,t,n){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=n,n(e.$$.ctx[o]))}function R(e){e&&e.c()}function H(e,n,l,r){const{fragment:c,on_mount:a,on_destroy:u,after_update:s}=e.$$;c&&c.m(n,l),r||G((()=>{const n=a.map(t).filter(i);u?u.push(...n):o(n),e.$$.on_mount=[]})),s.forEach(G)}function J(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Q(e,t){-1===e.$$.dirty[0]&&(E.push(e),M||(M=!0,B.then(j)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function z(t,i,l,r,c,a,s,d=[-1]){const f=D;x(t);const p=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:i.context||[]),callbacks:n(),dirty:d,skip_bound:!1,root:i.target||f.$$.root};s&&s(p.root);let m=!1;if(p.ctx=l?l(t,i.props||{},((e,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&c(p.ctx[e],p.ctx[e]=i)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](i),m&&Q(t,e)),n})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!r&&r(p.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);p.fragment&&p.fragment.l(e),e.forEach(u)}else p.fragment&&p.fragment.c();i.intro&&V(t.$$.fragment),H(t,i.target,i.anchor,i.customElement),j()}x(f)}class W{$destroy(){J(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var Y={Backquote:null,Digit1:"C#4",Digit2:"D#4",Digit3:"F4",Digit4:"G4",Digit5:"A4",Digit6:"B4",Digit7:"C#5",Digit8:"D#5",Digit9:"F5",Digit0:"G5",Minus:"A5",Equal:"B5",KeyQ:"G#3",KeyW:"A#3",KeyE:"C4",KeyR:"D4",KeyT:"E4",KeyY:"F#4",KeyU:"G#4",KeyI:"A#4",KeyO:"C5",KeyP:"D5",BracketLeft:"E5",BracketRight:"F#5",KeyA:"D#3",KeyS:"F3",KeyD:"G3",KeyF:"A3",KeyG:"B3",KeyH:"C#4",KeyJ:"D#4",KeyK:"F4",KeyL:"G4",Semicolon:"A4",Quote:"B4",Backslash:"C#5",KeyZ:"A#2",KeyX:"C3",KeyC:"D3",KeyV:"E3",KeyB:"F#3",KeyN:"G#3",KeyM:"A#3",Comma:"C4",Period:"D4",Slash:"E4"},U=Object.freeze({__proto__:null,wickiHayden:Y,piano:{Backquote:null,Digit1:null,Digit2:"F#3",Digit3:"G#3",Digit4:"A#3",Digit5:null,Digit6:"C#4",Digit7:"D#4",Digit8:null,Digit9:"F#4",Digit0:"G#4",Minus:"A#4",Equal:null,KeyQ:"F3",KeyW:"G3",KeyE:"A3",KeyR:"B3",KeyT:"C4",KeyY:"D4",KeyU:"E4",KeyI:"F4",KeyO:"G4",KeyP:"A4",BracketLeft:"B4",BracketRight:"C5",KeyA:null,KeyS:"C#2",KeyD:"D#2",KeyF:null,KeyG:"F#2",KeyH:"G#2",KeyJ:"A#2",KeyK:null,KeyL:"C#3",Semicolon:"D#3",Quote:null,Backslash:null,KeyZ:"C2",KeyX:"D2",KeyC:"E2",KeyV:"F2",KeyB:"G2",KeyN:"A2",KeyM:"B2",Comma:"C3",Period:"D3",Slash:"E3"}});const X=[["Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal"],["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight"],[null,"KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash"],[null,"KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash"]];function Z(e,t,n){const o=e.slice();return o[14]=t[n],o}function ee(e,t,n){const o=e.slice();return o[17]=t[n],o}function te(e){let t,n,i,l,s,f=e[1][e[17]]+"";function m(){return e[10](e[17])}function h(){return e[11](e[17])}return{c(){t=d("div"),n=p(f),y(t,"class",i=r(["key",e[17]?e[0].includes(e[17])?"pressed":e[2].includes(e[17])?"buffered":null:"spacer",["KeyF","KeyJ"].includes(e[17])?"dotted":null,e[4](e[17])].filter(Boolean).join(" "))+" svelte-1b9t1oc")},m(e,o){a(e,t,o),c(t,n),l||(s=[g(t,"mousedown",m),g(t,"mouseenter",h)],l=!0)},p(o,l){e=o,2&l&&f!==(f=e[1][e[17]]+"")&&b(n,f),5&l&&i!==(i=r(["key",e[17]?e[0].includes(e[17])?"pressed":e[2].includes(e[17])?"buffered":null:"spacer",["KeyF","KeyJ"].includes(e[17])?"dotted":null,e[4](e[17])].filter(Boolean).join(" "))+" svelte-1b9t1oc")&&y(t,"class",i)},d(e){e&&u(t),l=!1,o(s)}}}function ne(t){let n,o;return{c(){n=d("div"),o=p("Â "),y(n,"class",r(["key",["KeyF","KeyJ"].includes(t[17])?"dotted":null].filter(Boolean).join(" "))+" svelte-1b9t1oc")},m(e,t){a(e,n,t),c(n,o)},p:e,d(e){e&&u(n)}}}function oe(e){let t;function n(e,t){return e[17]&&e[1][e[17]]?te:ne}let o=n(e),i=o(e);return{c(){i.c(),t=h()},m(e,n){i.m(e,n),a(e,t,n)},p(e,l){o===(o=n(e))&&i?i.p(e,l):(i.d(1),i=o(e),i&&(i.c(),i.m(t.parentNode,t)))},d(e){i.d(e),e&&u(t)}}}function ie(e){let t,n,o=e[14],i=[];for(let t=0;t<o.length;t+=1)i[t]=oe(ee(e,o,t));return{c(){t=d("div");for(let e=0;e<i.length;e+=1)i[e].c();n=m(),y(t,"class","row svelte-1b9t1oc")},m(e,o){a(e,t,o);for(let e=0;e<i.length;e+=1)i[e].m(t,null);c(t,n)},p(e,l){if(159&l){let r;for(o=e[14],r=0;r<o.length;r+=1){const c=ee(e,o,r);i[r]?i[r].p(c,l):(i[r]=oe(c),i[r].c(),i[r].m(t,n))}for(;r<i.length;r+=1)i[r].d(1);i.length=o.length}},d(e){e&&u(t),s(i,e)}}}function le(t){let n,i,l,r=X,c=[];for(let e=0;e<r.length;e+=1)c[e]=ie(Z(t,r,e));return{c(){n=d("div");for(let e=0;e<c.length;e+=1)c[e].c();y(n,"tabindex","0"),y(n,"class","main svelte-1b9t1oc")},m(e,o){a(e,n,o);for(let e=0;e<c.length;e+=1)c[e].m(n,null);i||(l=[g(n,"keydown",$(t[5])),g(n,"keyup",$(t[6])),g(n,"focus",t[9]),g(n,"blur",t[7]),g(n,"mouseleave",t[12]),g(n,"mouseup",t[13])],i=!0)},p(e,[t]){if(159&t){let o;for(r=X,o=0;o<r.length;o+=1){const i=Z(e,r,o);c[o]?c[o].p(i,t):(c[o]=ie(i),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].d(1);c.length=r.length}},i:e,o:e,d(e){e&&u(n),s(c,e),i=!1,o(l)}}}function re(e,t,n){let{pressedKeys:o=[]}=t,{polyphony:i=1}=t,{keyNoteMap:l}=t;let r=[],c=!1;function a(){n(2,r=[])}return e.$$set=e=>{"pressedKeys"in e&&n(0,o=e.pressedKeys),"polyphony"in e&&n(8,i=e.polyphony),"keyNoteMap"in e&&n(1,l=e.keyNoteMap)},e.$$.update=()=>{260&e.$$.dirty&&n(0,o=r.slice(-i))},[o,l,r,c,function(e){const t=l[e];return"string"==typeof t&&t.includes("#")?"black":"white"},function(e){Object.keys(l).includes(e.code)&&!e.repeat&&n(2,r=[...r.filter((t=>t!==e.code)),e.code])},function(e){n(2,r=r.filter((t=>t!==e.code)))},a,i,function(t){_.call(this,e,t)},e=>{a(),n(3,c=!0),n(2,r=[e])},e=>{c&&n(2,r=[e])},()=>{c&&(a(),n(3,c=!1))},()=>{a(),n(3,c=!1)}]}class ce extends W{constructor(e){super(),z(this,e,re,le,l,{pressedKeys:0,polyphony:8,keyNoteMap:1})}}const ae=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];function ue(e){const t=Number(3===e.length?e.charAt(2):e.charAt(1));let n=ae.indexOf(e.slice(0,-1));return n=n<3?n+12+12*(t-1)+1:n+12*(t-1)+1,440*Math.pow(2,(n-49)/12)}const se=Math.cos,de=Math.sin,fe=Math.PI,pe=([[e,t],[n,o]],[i,l])=>[e*i+t*l,n*i+o*l],me=([e,t],[n,o])=>[e+n,t+o],he=([e,t],[n,o],[i,l],r)=>{l%=2*fe;const c=[[se(a=r),-de(a)],[de(a),se(a)]];var a;const[u,s]=me(pe(c,[n*se(i),o*de(i)]),[e,t]),[d,f]=me(pe(c,[n*se(i+l),o*de(i+l)]),[e,t]),p=l>fe?1:0,m=l>0?1:0,h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d","M "+u+" "+s+" A "+[n,o,r/(2*fe)*360,p,m,d,f].join(" ")),h};function ge(t){let n;return{c(){n=f("svg"),y(n,"viewBox","0 0 140 140"),y(n,"class","svelte-1ecbu59")},m(e,o){a(e,n,o),t[3](n)},p:e,i:e,o:e,d(e){e&&u(n),t[3](null)}}}function $e(e,t,n){let o,i,{sweep:l}=t;return e.$$set=e=>{"sweep"in e&&n(1,l=e.sweep)},e.$$.update=()=>{2&e.$$.dirty&&n(2,o=he([70,70],[50,50],[0,1.5*Math.PI*l],3*Math.PI/4)),5&e.$$.dirty&&i&&(n(0,i.innerHTML="",i),i.appendChild(o))},[i,l,o,function(e){C[e?"unshift":"push"]((()=>{i=e,n(0,i),n(2,o),n(1,l)}))}]}class ye extends W{constructor(e){super(),z(this,e,$e,ge,l,{sweep:1})}}function ve(e){let t,n,o,i,l;return{c(){t=f("svg"),n=f("text"),o=p(e[0]),i=f("text"),l=p(e[7]),y(n,"text-anchor","middle"),y(n,"x","50%"),y(n,"y","60%"),y(i,"text-anchor","middle"),y(i,"x","50%"),y(i,"y","100%"),y(t,"viewBox","0 0 60 40"),y(t,"class","svelte-1msmw6n")},m(e,r){a(e,t,r),c(t,n),c(n,o),c(t,i),c(i,l)},p(e,t){1&t&&b(o,e[0]),128&t&&b(l,e[7])},d(e){e&&u(t)}}}function be(e){let t,n,i;return{c(){t=d("input"),y(t,"id",e[2]),y(t,"type","number"),y(t,"step",e[5]),y(t,"class","svelte-1msmw6n")},m(o,l){a(o,t,l),e[17](t),K(t,e[0]),n||(i=[g(t,"input",e[18]),g(t,"blur",e[19]),g(t,"keyup",e[20])],n=!0)},p(e,n){4&n&&y(t,"id",e[2]),32&n&&y(t,"step",e[5]),1&n&&v(t.value)!==e[0]&&K(t,e[0])},d(l){l&&u(t),e[17](null),n=!1,o(i)}}}function Ke(e){let t,n,i,l,s,f,p,h,v,b,K,w,k,D;function x(e,t){return e[10]?be:ve}i=new ye({props:{sweep:1}}),f=new ye({props:{sweep:(e[0]-e[3])/(e[4]-e[3])}});let _=x(e),E=_(e);return{c(){t=d("div"),n=d("div"),R(i.$$.fragment),l=m(),s=d("div"),R(f.$$.fragment),p=m(),h=d("div"),E.c(),y(n,"class","background-arc svelte-1msmw6n"),y(s,"class","foreground-arc svelte-1msmw6n"),y(h,"class","value svelte-1msmw6n"),y(t,"class",v=r("knob"+(e[8]?" disabled":""))+" svelte-1msmw6n"),y(t,"title",b=`${e[1]?`${e[1]}: `:""}${e[0]}${e[7].length?` ${e[7]}`:""}`),y(t,"style",K=`width: ${e[6]}px`)},m(o,r){a(o,t,r),c(t,n),H(i,n,null),c(t,l),c(t,s),H(f,s,null),c(t,p),c(t,h),E.m(h,null),w=!0,k||(D=[g(t,"mousedown",e[21]),g(t,"wheel",$(e[11])),g(t,"click",$(e[12])),g(t,"dblclick",$(e[13]))],k=!0)},p(e,[n]){const o={};25&n&&(o.sweep=(e[0]-e[3])/(e[4]-e[3])),f.$set(o),_===(_=x(e))&&E?E.p(e,n):(E.d(1),E=_(e),E&&(E.c(),E.m(h,null))),(!w||256&n&&v!==(v=r("knob"+(e[8]?" disabled":""))+" svelte-1msmw6n"))&&y(t,"class",v),(!w||131&n&&b!==(b=`${e[1]?`${e[1]}: `:""}${e[0]}${e[7].length?` ${e[7]}`:""}`))&&y(t,"title",b),(!w||64&n&&K!==(K=`width: ${e[6]}px`))&&y(t,"style",K)},i(e){w||(V(i.$$.fragment,e),V(f.$$.fragment,e),w=!0)},o(e){L(i.$$.fragment,e),L(f.$$.fragment,e),w=!1},d(e){e&&u(t),J(i),J(f),E.d(),k=!1,o(D)}}}function we(e,t,n){let o,i,{label:l=null}=t,{id:r=""}=t,{min:c=0}=t,{max:a=100}=t,{value:u=0}=t,{step:s=1}=t,{invert:d=!1}=t,{initialValue:f=null}=t,{size:p=50}=t,{unit:m=""}=t,{disabled:h=!1}=t,g=!1,$=(u-c)/(a-c)*300;return e.$$set=e=>{"label"in e&&n(1,l=e.label),"id"in e&&n(2,r=e.id),"min"in e&&n(3,c=e.min),"max"in e&&n(4,a=e.max),"value"in e&&n(0,u=e.value),"step"in e&&n(5,s=e.step),"invert"in e&&n(14,d=e.invert),"initialValue"in e&&n(15,f=e.initialValue),"size"in e&&n(6,p=e.size),"unit"in e&&n(7,m=e.unit),"disabled"in e&&n(8,h=e.disabled)},e.$$.update=()=>{65536&e.$$.dirty&&n(16,$=Math.max(0,Math.min(300,$))),65561&e.$$.dirty&&(n(0,u=$/300*(a-c)+c),n(0,u=Math.round(u))),512&e.$$.dirty&&(null==i||i.focus())},[u,l,r,c,a,s,p,m,h,i,g,function(e){g||n(16,$+=(d?-1:1)*e.deltaY>0?s:-s)},function(){clearTimeout(o),o=setTimeout((()=>{n(10,g=!0)}),500)},function(){clearTimeout(o),null!=f&&n(0,u=f)},d,f,$,function(e){C[e?"unshift":"push"]((()=>{i=e,n(9,i)}))},function(){u=v(this.value),n(0,u),n(16,$),n(4,a),n(3,c)},()=>{n(10,g=!1)},e=>{["Enter","NumpadEnter"].includes(e.code)&&n(10,g=!1)},e=>{g||e.preventDefault()}]}class ke extends W{constructor(e){super(),z(this,e,we,Ke,l,{label:1,id:2,min:3,max:4,value:0,step:5,invert:14,initialValue:15,size:6,unit:7,disabled:8})}}const De=["sine","square","sawtooth","triangle"];let xe=null,_e=[];function Ee(e){Be(),_e=[],e.filter((e=>e.enabled)).forEach((e=>{!function(e){const t=xe.createOscillator();t.type=e.waveform,t.detune.value=e.detune;const n=xe.createGain();n.gain.value=1;const o=xe.createGain();o.gain.value=e.gain/100,n.connect(o),o.connect(xe.destination),t.start(),_e=[..._e,{oscillatorNode:t,envelopeGainNode:n,outputGainNode:o,octave:e.octave}],_e.length>3&&console.log("oscillator count:",_e.length)}(e)}))}function Ce(e,t){return t*2**e.octave}function Ne(e){_e.forEach((t=>{const n=Ce(t,e);t.oscillatorNode.frequency.setValueAtTime(n,xe.currentTime),t.oscillatorNode.connect(t.outputGainNode)}))}function Ae(e,t){_e.forEach((n=>{const o=Ce(n,e);n.oscillatorNode.frequency.exponentialRampToValueAtTime(o,xe.currentTime+t/1e3),n.oscillatorNode.connect(n.outputGainNode)}))}function Be(){_e.forEach((e=>{try{e.oscillatorNode.disconnect(e.outputGainNode)}catch(e){}}))}function Me(e,t,n){const o=e.slice();return o[4]=t[n],o}function Ge(t){let n,o,i,l=t[4]+"";return{c(){n=d("option"),o=p(l),n.__value=i=t[4],n.value=n.__value},m(e,t){a(e,n,t),c(n,o)},p:e,d(e){e&&u(n)}}}function Fe(e){let t,n,i,l,r,f,p,h,$,v,b,K,k,D,x,_,E,N,A,B,M,O,q,j,S,T,P,Q,z,W=De,Y=[];for(let t=0;t<W.length;t+=1)Y[t]=Ge(Me(e,W,t));function U(t){e[8](t)}let X={id:"gain",label:"Gain",min:0,max:100,step:1,unit:"%",invert:e[5]};function Z(t){e[9](t)}void 0!==e[1]&&(X.value=e[1]),D=new ke({props:X}),C.push((()=>I(D,"value",U)));let ee={label:"Detune",id:"detune",min:-50,max:50,step:1,initialValue:0,unit:"c",invert:e[5]};function te(t){e[10](t)}void 0!==e[2]&&(ee.value=e[2]),A=new ke({props:ee}),C.push((()=>I(A,"value",Z)));let ne={label:"Octave",id:"octave",min:-2,max:2,step:1,initialValue:0,invert:e[5]};return void 0!==e[3]&&(ne.value=e[3]),j=new ke({props:ne}),C.push((()=>I(j,"value",te))),{c(){t=d("div"),n=d("fieldset"),i=d("legend"),l=d("label"),l.textContent="Enable",r=m(),f=d("input"),p=m(),h=d("label"),h.textContent="Waveform",$=m(),v=d("select");for(let e=0;e<Y.length;e+=1)Y[e].c();b=m(),K=d("label"),K.textContent="Gain",k=m(),R(D.$$.fragment),_=m(),E=d("label"),E.textContent="Detune",N=m(),R(A.$$.fragment),M=m(),O=d("label"),O.textContent="Octave",q=m(),R(j.$$.fragment),y(l,"for","enabled"),y(f,"type","checkbox"),y(f,"id","enabled"),y(h,"for","waveform"),y(v,"id","waveform"),void 0===e[4]&&G((()=>e[7].call(v))),y(K,"for","gain"),y(E,"for","detune"),y(O,"for","octave"),n.disabled=T=!e[0],y(t,"class","container svelte-1nb9xla")},m(o,u){a(o,t,u),c(t,n),c(n,i),c(i,l),c(i,r),c(i,f),f.checked=e[0],c(n,p),c(n,h),c(n,$),c(n,v);for(let e=0;e<Y.length;e+=1)Y[e].m(v,null);w(v,e[4]),c(n,b),c(n,K),c(n,k),H(D,n,null),c(n,_),c(n,E),c(n,N),H(A,n,null),c(n,M),c(n,O),c(n,q),H(j,n,null),P=!0,Q||(z=[g(f,"change",e[6]),g(v,"change",e[7])],Q=!0)},p(e,[t]){if(1&t&&(f.checked=e[0]),0&t){let n;for(W=De,n=0;n<W.length;n+=1){const o=Me(e,W,n);Y[n]?Y[n].p(o,t):(Y[n]=Ge(o),Y[n].c(),Y[n].m(v,null))}for(;n<Y.length;n+=1)Y[n].d(1);Y.length=W.length}16&t&&w(v,e[4]);const o={};32&t&&(o.invert=e[5]),!x&&2&t&&(x=!0,o.value=e[1],F((()=>x=!1))),D.$set(o);const i={};32&t&&(i.invert=e[5]),!B&&4&t&&(B=!0,i.value=e[2],F((()=>B=!1))),A.$set(i);const l={};32&t&&(l.invert=e[5]),!S&&8&t&&(S=!0,l.value=e[3],F((()=>S=!1))),j.$set(l),(!P||1&t&&T!==(T=!e[0]))&&(n.disabled=T)},i(e){P||(V(D.$$.fragment,e),V(A.$$.fragment,e),V(j.$$.fragment,e),P=!0)},o(e){L(D.$$.fragment,e),L(A.$$.fragment,e),L(j.$$.fragment,e),P=!1},d(e){e&&u(t),s(Y,e),J(D),J(A),J(j),Q=!1,o(z)}}}function Oe(e,t,n){let{enabled:o}=t,{waveform:i}=t,{gain:l}=t,{detune:r}=t,{octave:c}=t,{invertKnobs:a=!1}=t;return e.$$set=e=>{"enabled"in e&&n(0,o=e.enabled),"waveform"in e&&n(4,i=e.waveform),"gain"in e&&n(1,l=e.gain),"detune"in e&&n(2,r=e.detune),"octave"in e&&n(3,c=e.octave),"invertKnobs"in e&&n(5,a=e.invertKnobs)},[o,l,r,c,i,a,function(){o=this.checked,n(0,o)},function(){i=k(this),n(4,i)},function(e){l=e,n(1,l)},function(e){r=e,n(2,r)},function(e){c=e,n(3,c)}]}class qe extends W{constructor(e){super(),z(this,e,Oe,Fe,l,{enabled:0,waveform:4,gain:1,detune:2,octave:3,invertKnobs:5})}}function je(e,t,n){const o=e.slice();return o[12]=t[n],o[13]=t,o[14]=n,o}function Se(e){let t,n,o,i,l,r,c;function a(t){e[7](t,e[12])}function u(t){e[8](t,e[12])}function s(t){e[9](t,e[12])}function d(t){e[10](t,e[12])}function f(t){e[11](t,e[12])}let p={invertKnobs:e[3]};return void 0!==e[12].enabled&&(p.enabled=e[12].enabled),void 0!==e[12].waveform&&(p.waveform=e[12].waveform),void 0!==e[12].gain&&(p.gain=e[12].gain),void 0!==e[12].detune&&(p.detune=e[12].detune),void 0!==e[12].octave&&(p.octave=e[12].octave),t=new qe({props:p}),C.push((()=>I(t,"enabled",a))),C.push((()=>I(t,"waveform",u))),C.push((()=>I(t,"gain",s))),C.push((()=>I(t,"detune",d))),C.push((()=>I(t,"octave",f))),{c(){R(t.$$.fragment)},m(e,n){H(t,e,n),c=!0},p(c,a){e=c;const u={};8&a&&(u.invertKnobs=e[3]),!n&&4&a&&(n=!0,u.enabled=e[12].enabled,F((()=>n=!1))),!o&&4&a&&(o=!0,u.waveform=e[12].waveform,F((()=>o=!1))),!i&&4&a&&(i=!0,u.gain=e[12].gain,F((()=>i=!1))),!l&&4&a&&(l=!0,u.detune=e[12].detune,F((()=>l=!1))),!r&&4&a&&(r=!0,u.octave=e[12].octave,F((()=>r=!1))),t.$set(u)},i(e){c||(V(t.$$.fragment,e),c=!0)},o(e){L(t.$$.fragment,e),c=!1},d(e){J(t,e)}}}function Te(e){let t,n,i,l,r,c,f,p,$,v,b,K,w,k,D;function x(t){e[6](t)}let _={label:"Portamento duration",id:"portamento-duration",disabled:!e[0],unit:"ms",min:0,max:200,step:1,invert:e[3]};void 0!==e[1]&&(_.value=e[1]),$=new ke({props:_}),C.push((()=>I($,"value",x)));let E=e[2],N=[];for(let t=0;t<E.length;t+=1)N[t]=Se(je(e,E,t));const A=e=>L(N[e],1,1,(()=>{N[e]=null}));return{c(){t=d("label"),t.textContent="Invert knob wheel control?",n=m(),i=d("input"),l=m(),r=d("label"),r.textContent="Portamento",c=m(),f=d("input"),p=m(),R($.$$.fragment),b=m();for(let e=0;e<N.length;e+=1)N[e].c();K=h(),y(t,"for","invert-knobs"),y(i,"id","invert-knobs"),y(i,"type","checkbox"),y(r,"for","portamento-enabled"),y(f,"id","portamento-enabled"),y(f,"type","checkbox")},m(o,u){a(o,t,u),a(o,n,u),a(o,i,u),i.checked=e[3],a(o,l,u),a(o,r,u),a(o,c,u),a(o,f,u),f.checked=e[0],a(o,p,u),H($,o,u),a(o,b,u);for(let e=0;e<N.length;e+=1)N[e].m(o,u);a(o,K,u),w=!0,k||(D=[g(i,"change",e[4]),g(f,"change",e[5])],k=!0)},p(e,[t]){8&t&&(i.checked=e[3]),1&t&&(f.checked=e[0]);const n={};if(1&t&&(n.disabled=!e[0]),8&t&&(n.invert=e[3]),!v&&2&t&&(v=!0,n.value=e[1],F((()=>v=!1))),$.$set(n),12&t){let n;for(E=e[2],n=0;n<E.length;n+=1){const o=je(e,E,n);N[n]?(N[n].p(o,t),V(N[n],1)):(N[n]=Se(o),N[n].c(),V(N[n],1),N[n].m(K.parentNode,K))}for(P={r:0,c:[],p:P},n=E.length;n<N.length;n+=1)A(n);P.r||o(P.c),P=P.p}},i(e){if(!w){V($.$$.fragment,e);for(let e=0;e<E.length;e+=1)V(N[e]);w=!0}},o(e){L($.$$.fragment,e),N=N.filter(Boolean);for(let e=0;e<N.length;e+=1)L(N[e]);w=!1},d(e){e&&u(t),e&&u(n),e&&u(i),e&&u(l),e&&u(r),e&&u(c),e&&u(f),e&&u(p),J($,e),e&&u(b),s(N,e),e&&u(K),k=!1,o(D)}}}function Pe(e,t,n){let{portamentoEnabled:o}=t,{portamentoDuration:i}=t,{oscillators:l}=t,r=!1;return e.$$set=e=>{"portamentoEnabled"in e&&n(0,o=e.portamentoEnabled),"portamentoDuration"in e&&n(1,i=e.portamentoDuration),"oscillators"in e&&n(2,l=e.oscillators)},[o,i,l,r,function(){r=this.checked,n(3,r)},function(){o=this.checked,n(0,o)},function(e){i=e,n(1,i)},function(t,o){e.$$.not_equal(o.enabled,t)&&(o.enabled=t,n(2,l))},function(t,o){e.$$.not_equal(o.waveform,t)&&(o.waveform=t,n(2,l))},function(t,o){e.$$.not_equal(o.gain,t)&&(o.gain=t,n(2,l))},function(t,o){e.$$.not_equal(o.detune,t)&&(o.detune=t,n(2,l))},function(t,o){e.$$.not_equal(o.octave,t)&&(o.octave=t,n(2,l))}]}class Ve extends W{constructor(e){super(),z(this,e,Pe,Te,l,{portamentoEnabled:0,portamentoDuration:1,oscillators:2})}}function Le(e,t,n){const o=e.slice();return o[14]=t[n],o}function Ie(t){let n,o,i,l=t[14]+"";return{c(){n=d("option"),o=p(l),n.__value=i=t[14],n.value=n.__value},m(e,t){a(e,n,t),c(n,o)},p:e,d(e){e&&u(n)}}}function Re(e){let t,n,i,l,r,f,p,h,$,v,b,K,k,D,x;function _(t){e[8](t)}function E(t){e[9](t)}function N(t){e[10](t)}let A={};void 0!==e[5]&&(A.oscillators=e[5]),void 0!==e[4]&&(A.portamentoDuration=e[4]),void 0!==e[3]&&(A.portamentoEnabled=e[3]),i=new Ve({props:A}),C.push((()=>I(i,"oscillators",_))),C.push((()=>I(i,"portamentoDuration",E))),C.push((()=>I(i,"portamentoEnabled",N)));let B=Object.keys(U),M=[];for(let t=0;t<B.length;t+=1)M[t]=Ie(Le(e,B,t));function O(t){e[12](t)}let q={keyNoteMap:e[0],polyphony:1};return void 0!==e[1]&&(q.pressedKeys=e[1]),b=new ce({props:q}),C.push((()=>I(b,"pressedKeys",O))),{c(){t=d("button"),t.textContent="PANIC",n=m(),R(i.$$.fragment),p=m(),h=d("div"),$=d("select");for(let e=0;e<M.length;e+=1)M[e].c();v=m(),R(b.$$.fragment),void 0===e[2]&&G((()=>e[11].call($))),y(h,"class","keyboard")},m(o,l){a(o,t,l),a(o,n,l),H(i,o,l),a(o,p,l),a(o,h,l),c(h,$);for(let e=0;e<M.length;e+=1)M[e].m($,null);w($,e[2]),c(h,v),H(b,h,null),k=!0,D||(x=[g(t,"click",e[7]),g($,"change",e[11]),g(h,"click",e[13])],D=!0)},p(e,[t]){const n={};if(!l&&32&t&&(l=!0,n.oscillators=e[5],F((()=>l=!1))),!r&&16&t&&(r=!0,n.portamentoDuration=e[4],F((()=>r=!1))),!f&&8&t&&(f=!0,n.portamentoEnabled=e[3],F((()=>f=!1))),i.$set(n),0&t){let n;for(B=Object.keys(U),n=0;n<B.length;n+=1){const o=Le(e,B,n);M[n]?M[n].p(o,t):(M[n]=Ie(o),M[n].c(),M[n].m($,null))}for(;n<M.length;n+=1)M[n].d(1);M.length=B.length}4&t&&w($,e[2]);const o={};1&t&&(o.keyNoteMap=e[0]),!K&&2&t&&(K=!0,o.pressedKeys=e[1],F((()=>K=!1))),b.$set(o)},i(e){k||(V(i.$$.fragment,e),V(b.$$.fragment,e),k=!0)},o(e){L(i.$$.fragment,e),L(b.$$.fragment,e),k=!1},d(e){e&&u(t),e&&u(n),J(i,e),e&&u(p),e&&u(h),s(M,e),J(b),D=!1,o(x)}}}function He(e,t,n){let o,{keyNoteMap:i=Y}=t,l=[],r="wickiHayden",c=!1,a=50,u=[{enabled:!0,waveform:"sawtooth",gain:20,detune:0,octave:0},{enabled:!0,waveform:"sawtooth",gain:15,detune:-10,octave:1},{enabled:!0,waveform:"sawtooth",gain:15,detune:10,octave:-1}];return e.$$set=e=>{"keyNoteMap"in e&&n(0,i=e.keyNoteMap)},e.$$.update=()=>{if(32&e.$$.dirty&&Boolean(xe)&&Ee(u),4&e.$$.dirty&&n(0,i=U[r]),1&e.$$.dirty&&n(6,o=function(e){return Object.entries(e).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[t]:n?"string"==typeof n?ue(n):n:null})),{})}(i)),90&e.$$.dirty)if(1===l.length){const e=o[l[0]];c?Ae(e,a):Ne(e)}else Be()},[i,l,r,c,a,u,o,()=>{Be()},function(e){u=e,n(5,u)},function(e){a=e,n(4,a)},function(e){c=e,n(3,c)},function(){r=k(this),n(2,r)},function(e){l=e,n(1,l)},()=>{xe||(xe=new window.AudioContext),Ee(u)}]}class Je extends W{constructor(e){super(),z(this,e,He,Re,l,{keyNoteMap:0})}}function Qe(t){let n,o;return n=new Je({}),{c(){R(n.$$.fragment)},m(e,t){H(n,e,t),o=!0},p:e,i(e){o||(V(n.$$.fragment,e),o=!0)},o(e){L(n.$$.fragment,e),o=!1},d(e){J(n,e)}}}return new class extends W{constructor(e){super(),z(this,e,null,Qe,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
